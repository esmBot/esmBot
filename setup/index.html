
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../config/">
      
      
      <link rel="icon" href="../assets/esmbot.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Setup - esmBot</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#setup" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="esmBot" class="md-header__button md-logo" aria-label="esmBot" data-md-component="logo">
      
  <img src="../assets/esmbot.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            esmBot
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Setup
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/esmBot/esmBot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    esmBot/esmBot
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="esmBot" class="md-nav__button md-logo" aria-label="esmBot" data-md-component="logo">
      
  <img src="../assets/esmbot.png" alt="logo">

    </a>
    esmBot
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/esmBot/esmBot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    esmBot/esmBot
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Setup
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Setup
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-install-the-required-native-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      1. Install the required native dependencies.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-install-nodejs" class="md-nav__link">
    <span class="md-ellipsis">
      2. Install Node.js.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-set-up-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      3. Set up the database.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-clone-the-repo-and-install-the-required-node-modules" class="md-nav__link">
    <span class="md-ellipsis">
      4. Clone the repo and install the required Node modules.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-optional-set-up-lavalink" class="md-nav__link">
    <span class="md-ellipsis">
      5. (Optional) Set up Lavalink.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-configure-the-bot" class="md-nav__link">
    <span class="md-ellipsis">
      6. Configure the bot.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-run-the-bot" class="md-nav__link">
    <span class="md-ellipsis">
      7. Run the bot.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Commands
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../bun/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bun Support
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../containers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Containers
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../postgresql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PostgreSQL
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="setup">Setup</h1>
<p>Here are some instructions to get esmBot up and running from source.</p>
<details class="check">
<summary>Recommended system requirements</summary>
<ul>
<li>64-bit CPU/operating system</li>
<li>Quad-core CPU or better</li>
<li>512MB or more of RAM</li>
<li>Unix-like (e.g. Linux, macOS, FreeBSD) operating system or virtual machine (<a href="https://ubuntu.com/download/server">Ubuntu</a> or <a href="https://getfedora.org/">Fedora</a> are recommended)</li>
</ul>
</details>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you want to run the bot on Windows, <a href="https://learn.microsoft.com/windows/wsl/install">Windows Subsystem for Linux</a> is recommended. This guide is somewhat centered around Unix-like systems, so for now you're mostly on your own if you decide not to use WSL.</p>
</div>
<p>If you have any further questions regarding setup, feel free to ask in the #support channel on the <a href="https://esmbot.net/support">esmBot Support server</a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can run the bot using Docker or Podman for a somewhat simpler setup experience. <a href="https://docs.esmbot.net/containers">Click here to go to the container setup guide.</a></p>
</div>
<h3 id="1-install-the-required-native-dependencies">1. Install the required native dependencies.</h3>
<p>Choose the OS you're using below for insallation instructions.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:5"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Debian/Ubuntu</label><label for="__tabbed_1_2">Fedora/RHEL</label><label for="__tabbed_1_3">Alpine</label><label for="__tabbed_1_4">Arch/Manjaro</label><label for="__tabbed_1_5">macOS (Homebrew)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>These instructions apply to Debian version 12 (bookworm) or Ubuntu version 24.04 (noble) or later.
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>git<span class="w"> </span>curl<span class="w"> </span>build-essential<span class="w"> </span>cmake<span class="w"> </span>ffmpeg<span class="w"> </span>sqlite3<span class="w"> </span>ttf-mscorefonts-installer<span class="w"> </span>libmagick++-dev<span class="w"> </span>libvips-dev<span class="w"> </span>libzxing-dev
</code></pre></div>
On older Debian/Ubuntu versions, you may need to install some of these packages (notably libcgif-dev and meson) through alternative methods.</p>
</div>
<div class="tabbed-block">
<p>These instructions apply to Fedora 38/RHEL 9 or later.</p>
<p>Some of these packages require that you add the RPM Fusion and/or EPEL repositories. You can find instructions on how to add them <a href="https://rpmfusion.org/Configuration">here</a>.
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>git<span class="w"> </span>curl<span class="w"> </span>cmake<span class="w"> </span>ffmpeg<span class="w"> </span>sqlite<span class="w"> </span>gcc-c++<span class="w"> </span>ImageMagick-c++-devel<span class="w"> </span>vips-devel<span class="w"> </span>cabextract<span class="w"> </span>zxing-cpp-devel
</code></pre></div>
On RHEL-based distros like AlmaLinux and Rocky Linux, you may need to add <a href="https://rpms.remirepo.net">Remi's RPM Repository</a> for the vips package.</p>
<p>Some fonts used in the bot (e.g. Impact) require installing the MS Core Fonts package, which is unavailable through most RHEL repositories. You can install it using the following command (you're on your own regarding dependencies, each RHEL derivative handles them differently):
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>rpm<span class="w"> </span>-i<span class="w"> </span>https://downloads.sourceforge.net/project/mscorefonts2/rpms/msttcore-fonts-installer-2.6-1.noarch.rpm
</code></pre></div></p>
</div>
<div class="tabbed-block">
<p>These instructions should apply to version 3.17 or later.
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apk<span class="w"> </span>add<span class="w"> </span>git<span class="w"> </span>curl<span class="w"> </span>msttcorefonts-installer<span class="w"> </span>python3<span class="w"> </span>sqlite3<span class="w"> </span>alpine-sdk<span class="w"> </span>cmake<span class="w"> </span>ffmpeg<span class="w"> </span>imagemagick-dev<span class="w"> </span>vips-dev<span class="w"> </span>zxing-cpp-dev
</code></pre></div></p>
</div>
<div class="tabbed-block">
<p><div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>pacman<span class="w"> </span>-S<span class="w"> </span>git<span class="w"> </span>curl<span class="w"> </span>cmake<span class="w"> </span>ffmpeg<span class="w"> </span>npm<span class="w"> </span>imagemagick<span class="w"> </span>libvips<span class="w"> </span>sqlite3<span class="w"> </span>zxing-cpp
</code></pre></div>
You'll also need to install <a href="https://aur.archlinux.org/packages/ttf-ms-win10-auto/"><code>ttf-ms-win10-auto</code></a> from the AUR.</p>
</div>
<div class="tabbed-block">
<p><div class="highlight"><pre><span></span><code>brew<span class="w"> </span>install<span class="w"> </span>cmake<span class="w"> </span>ffmpeg<span class="w"> </span>imagemagick<span class="w"> </span>libvips
</code></pre></div>
The <code>zxing-cpp</code> package is not available through Homebrew, so unfortunately the QR commands will be unavailable on macOS without further intervention.</p>
</div>
</div>
</div>
<hr />
<h3 id="2-install-nodejs">2. Install Node.js.</h3>
<p>Node.js is the runtime that esmBot is built on top of. The bot requires version 20.12.0 or above to run.</p>
<p>We suggest using nvm to manage your Node.js install. Run the following command to install it:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-o-<span class="w"> </span>https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>bash
</code></pre></div>
<p>Then run the following to install Node.js:</p>
<div class="highlight"><pre><span></span><code>nvm<span class="w"> </span>install<span class="w"> </span><span class="m">20</span>
nvm<span class="w"> </span>use<span class="w"> </span><span class="m">20</span>
</code></pre></div>
<p>esmBot uses the pnpm package manager to manage dependencies and run build scripts. You can use Corepack (a tool included with Node.js) to enable it, and once you attempt to run it for the first time it will ask you to install it:</p>
<div class="highlight"><pre><span></span><code>corepack<span class="w"> </span><span class="nb">enable</span>
</code></pre></div>
<hr />
<h3 id="3-set-up-the-database">3. Set up the database.</h3>
<p>esmBot officially supports two database systems: SQLite and PostgreSQL. While SQLite is smaller and requires no initial setup, PostgreSQL has better performance (especially in large environments).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you're new to databases and self-hosting, choose SQLite.</p>
</div>
<p>If you would like to use the SQLite database, no configuration is needed and you can move on to the next step.</p>
<p>If you would like to use the PostgreSQL database, view the setup instructions <a href="https://docs.esmbot.net/postgresql">here</a> and come back here when you're finished.</p>
<hr />
<h3 id="4-clone-the-repo-and-install-the-required-node-modules">4. Clone the repo and install the required Node modules.</h3>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~
git<span class="w"> </span>clone<span class="w"> </span>--recursive<span class="w"> </span>https://github.com/esmBot/esmBot
<span class="nb">cd</span><span class="w"> </span>esmBot
pnpm<span class="w"> </span>install
pnpm<span class="w"> </span>build
</code></pre></div>
<hr />
<h3 id="5-optional-set-up-lavalink">5. (Optional) Set up Lavalink.</h3>
<p>Lavalink is the audio server used by esmBot for music playback. If you do not plan on using this feature, you can safely skip this step.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There are websites out there providing lists of public Lavalink instances that can be used with the bot. However, these are not recommended due to performance/security concerns and missing features, and it is highly recommended to set one up yourself instead using the steps below.</p>
</div>
<p>esmBot requires Lavalink version v4 or later, which requires a Java (17 or later) installation. Choose the OS you're using below for the command to use to install Java.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:5"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><input id="__tabbed_2_5" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Debian/Ubuntu</label><label for="__tabbed_2_2">Fedora/RHEL</label><label for="__tabbed_2_3">Alpine</label><label for="__tabbed_2_4">Arch/Manjaro</label><label for="__tabbed_2_5">macOS (Homebrew)</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>openjdk-21-jdk
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>java-21-openjdk
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apk<span class="w"> </span>add<span class="w"> </span>openjdk21
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>pacman<span class="w"> </span>-S<span class="w"> </span>jdk-openjdk
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>brew<span class="w"> </span>install<span class="w"> </span>openjdk
</code></pre></div>
</div>
</div>
</div>
<p>Initial setup is like this:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~
mkdir<span class="w"> </span>Lavalink
<span class="nb">cd</span><span class="w"> </span>Lavalink
curl<span class="w"> </span>-OL<span class="w"> </span>https://github.com/lavalink-devs/Lavalink/releases/latest/download/Lavalink.jar
ln<span class="w"> </span>-s<span class="w"> </span>~/esmBot/application.yml<span class="w"> </span>.
</code></pre></div>
<p>To run Lavalink, you can use this command:</p>
<div class="highlight"><pre><span></span><code>java<span class="w"> </span>-jar<span class="w"> </span>Lavalink.jar
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You'll need to run Lavalink alongside the bot in order to use it. There are a few methods to do this, such as the <code>screen</code> command, creating a new systemd service, or simply just opening a new terminal session alongside your current one.</p>
</div>
<hr />
<h3 id="6-configure-the-bot">6. Configure the bot.</h3>
<p>Configuration is done via environment variables which can be specified through a <code>.env</code> file. Copy <code>.env.example</code> to get a starter config file:</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>.env.example<span class="w"> </span>.env
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you can't see either of these files, don't worry - Linux treats files whose names start with a . as hidden files.</p>
</div>
<p>To edit this file in the terminal, run this command:</p>
<div class="highlight"><pre><span></span><code>nano<span class="w"> </span>.env
</code></pre></div>
<p>This will launch a text editor with the file ready to go. Create a Discord application <a href="https://discord.com/developers/applications">here</a> and select the Bot tab on the left, then create a bot user. Once you've done this, copy the token it gives you and put it in the <code>TOKEN</code> variable.</p>
<p>When you're finished editing the file, press Ctrl + X, then Y and Enter.</p>
<p>An overview of each of the variables in the <code>.env</code> file can be found <a href="https://docs.esmbot.net/config">here</a>.</p>
<hr />
<h3 id="7-run-the-bot">7. Run the bot.</h3>
<p>Once everything else is set up, you can start the bot like so:</p>
<div class="highlight"><pre><span></span><code>pnpm<span class="w"> </span>start
</code></pre></div>
<p>If the bot starts successfully, you're done! You can invite the bot to your server by generating an invite link under OAuth -&gt; URL Generator in the Discord application dashboard.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need to select the <code>bot</code> and <code>applications.commands</code> scopes.
The following permissions are needed in most cases for the bot to work properly:</p>
<p><figure markdown>
<a class="glightbox" href="../assets/permissions.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Required permissions" loading="lazy," src="../assets/permissions.png" width="500" /></a>
<figcaption>click to enlarge</figcaption>
</figure></p>
</div>
<p>If you want the bot to run 24/7, you can use the <a href="https://pm2.keymetrics.io">PM2</a> process manager. Install it using the following command:</p>
<div class="highlight"><pre><span></span><code>pnpm<span class="w"> </span>add<span class="w"> </span>-g<span class="w"> </span>pm2
</code></pre></div>
<p>Once you've done that, you can start the bot using the following command:</p>
<div class="highlight"><pre><span></span><code>pm2<span class="w"> </span>start<span class="w"> </span>ecosystem.config.cjs
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you wish to update the bot to the latest version/commit at any time, run the following commands:
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>pull
pnpm<span class="w"> </span>install
pnpm<span class="w"> </span>build
</code></pre></div></p>
</div>
<hr />
<h2 id="troubleshooting">Troubleshooting</h2>
<details class="faq">
<summary>Error: Cannot find module './build/Release/image.node'</summary>
<p>The native image functions haven't been built. Run <code>pnpm build</code> to build them.</p>
</details>
<details class="faq">
<summary><code>pnpm install</code> or <code>pnpm build</code> fails with error 'ELIFECYCLE  Command failed.'</summary>
<p>You might need to install node-gyp. You can do this by running the following:
<div class="highlight"><pre><span></span><code>pnpm<span class="w"> </span>i<span class="w"> </span>-g<span class="w"> </span>node-gyp
rm<span class="w"> </span>-rf<span class="w"> </span>node_modules
pnpm<span class="w"> </span>install
</code></pre></div></p>
</details>
<details class="faq">
<summary>Error: connect ECONNREFUSED 127.0.0.1:5432</summary>
<p>PostgreSQL isn't running, you should be able to start it on most Linux systems with <code>sudo systemctl start postgresql</code>. If you don't intend to use PostgreSQL, you should take another look at your <code>DB</code> variable in the .env file.</p>
</details>
<details class="faq">
<summary>Gifs from Tenor result in a "no decode delegate for this image format" or "improper image header" error</summary>
<p>Tenor GIFs are actually stored as MP4s, which libvips can't decode most of the time. You'll need to get a Tenor API key from <a href="https://developers.google.com/tenor/guides/quickstart">here</a> and put it in the <code>TENOR</code> variable in .env.</p>
</details>
<hr />
<p>If you have any further questions regarding self-hosting, feel free to ask in the #support channel on the <a href="https://esmbot.net/support">esmBot Support server</a>.</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="May 16, 2025 17:32:04">May 16, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2018 - 2025 <a href="https://essem.space">Essem</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
    
    
    
      
      
    
    <a href="https://wetdry.world/@esmBot" target="_blank" rel="noopener me" title="wetdry.world" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38q.398-.092.786-.213c.585-.184 1.27-.39 1.774-.753a.06.06 0 0 0 .023-.043v-1.809a.05.05 0 0 0-.02-.041.05.05 0 0 0-.046-.01 20.3 20.3 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.6 5.6 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422q.059-.011.11-.024c2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545m-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102q0-1.965 1.011-3.12c.696-.77 1.608-1.164 2.74-1.164 1.311 0 2.302.5 2.962 1.498l.638 1.06.638-1.06c.66-.999 1.65-1.498 2.96-1.498 1.13 0 2.043.395 2.74 1.164q1.012 1.155 1.012 3.12z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://bsky.app/profile/esmbot.net" target="_blank" rel="noopener" title="bsky.app" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364q.204-.03.415-.056-.207.033-.415.056c-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a9 9 0 0 1-.415-.056q.21.026.415.056c2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/esmBot" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://ko-fi.com/TheEssem" target="_blank" rel="noopener" title="ko-fi.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.351 2.715c-2.7 0-4.986.025-6.83.26C2.078 3.285 0 5.154 0 8.61c0 3.506.182 6.13 1.585 8.493 1.584 2.701 4.233 4.182 7.662 4.182h.83c4.209 0 6.494-2.234 7.637-4a9.5 9.5 0 0 0 1.091-2.338C21.792 14.688 24 12.22 24 9.208v-.415c0-3.247-2.13-5.507-5.792-5.87-1.558-.156-2.65-.208-6.857-.208m0 1.947c4.208 0 5.09.052 6.571.182 2.624.311 4.13 1.584 4.13 4v.39c0 2.156-1.792 3.844-3.87 3.844h-.935l-.156.649c-.208 1.013-.597 1.818-1.039 2.546-.909 1.428-2.545 3.064-5.922 3.064h-.805c-2.571 0-4.831-.883-6.078-3.195-1.09-2-1.298-4.155-1.298-7.506 0-2.181.857-3.402 3.012-3.714 1.533-.233 3.559-.26 6.39-.26m6.547 2.287c-.416 0-.65.234-.65.546v2.935c0 .311.234.545.65.545 1.324 0 2.051-.754 2.051-2s-.727-2.026-2.052-2.026m-10.39.182c-1.818 0-3.013 1.48-3.013 3.142 0 1.533.858 2.857 1.949 3.897.727.701 1.87 1.429 2.649 1.896a1.47 1.47 0 0 0 1.507 0c.78-.467 1.922-1.195 2.623-1.896 1.117-1.039 1.974-2.364 1.974-3.897 0-1.662-1.247-3.142-3.039-3.142-1.065 0-1.792.545-2.338 1.298-.493-.753-1.246-1.298-2.312-1.298"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["toc.integrate", "content.tabs.link", "content.code.copy"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>